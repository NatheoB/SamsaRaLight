% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/check_inventory.R
\name{check_inventory}
\alias{check_inventory}
\title{Check the format and validity of a tree inventory data.frame}
\usage{
check_inventory(tree_inv, verbose = TRUE)
}
\arguments{
\item{tree_inv}{A data.frame with one row per tree and the following columns:
\itemize{
\item{id_tree}{Unique identifier of the tree (numeric or character, no duplicates)}
\item{x}{X position of the tree within the stand (numeric, meters)}
\item{y}{Y position of the tree within the stand (numeric, meters)}
\item{species}{OPTIONAL – species name (character)}
\item{dbh_cm}{Diameter at breast height (1.3 m, in cm)}
\item{crown_type}{Type of crown geometry. One of \code{"E"}, \code{"P"},
\code{"2E"}, \code{"8E"}, or \code{"4P"}}
\item{h_m}{Total tree height (numeric, meters)}
\item{hbase_m}{Height of the crown base (numeric, meters)}
\item{hmax_m}{Height of the maximum crown radius (numeric, meters).
Required only if at least one tree has a crown type \code{"2E"} or \code{"8E"}.
For other crown types, the value is ignored and internally recomputed.}
\item{rn_m}{Crown radius toward North (numeric, meters)}
\item{rs_m}{Crown radius toward South (numeric, meters)}
\item{re_m}{Crown radius toward East (numeric, meters)}
\item{rw_m}{Crown radius toward West (numeric, meters)}
\item{crown_openness}{OPTIONAL – Crown openness (unitless), mandatory for porous envelope interception}
\item{crown_lad}{OPTIONAL – Leaf Area Density (m² m⁻³), mandatory for turbid medium interception}
}}

\item{verbose}{Logical; if \code{TRUE}, informative messages and warnings are printed.}
}
\value{
Invisibly returns \code{TRUE} if all checks pass.
}
\description{
This function checks whether a tree inventory data.frame is correctly
formatted to be used as input for the ray-tracing model. It verifies
the presence, type, and validity of mandatory and optional variables
describing the geometry and attributes of trees within a forest stand.
}
\details{
The function performs the following checks and validations:
\itemize{
\item Ensures \code{tree_inv} is a non-empty data.frame with all required columns.
\item Checks that \code{id_tree} values are unique.
\item Validates numeric columns (\code{x}, \code{y}, \code{dbh_cm}, \code{h_m}, \code{hbase_m}, \code{rn_m}, \code{rs_m}, \code{re_m}, \code{rw_m}) are numeric and non-negative.
\item Verifies that \code{crown_type} values are one of \code{"E"}, \code{"P"}, \code{"2E"}, \code{"8E"}, or \code{"4P"}.
\item Ensures crown radii are present according to crown type. For symmetric crowns (\code{"E"}, \code{"P"}, \code{"2E"}), a single effective radius is computed if the four directional radii differ. For asymmetric crowns (\code{"8E"}, \code{"4P"}), all four directional radii must be provided.
\item Checks that \code{hmax_m} is provided when required by crown type (\code{"2E"} or \code{"8E"}) and lies between \code{hbase_m} and \code{h_m}.
\item Ensures \code{hbase_m} < \code{h_m}.
\item Verifies that each tree has at least one crown interception property defined (\code{crown_openness} or \code{crown_lad}).
\item Provides informative error messages and warnings for all invalid conditions.
}
}
\examples{
\dontrun{
# Using the example dataset from the package
data_prenovel <- SamsaRaLight::data_prenovel
trees <- data_prenovel$trees

# Check the inventory
check_inventory(trees)

# Quiet mode
check_inventory(trees, verbose = FALSE)
}

}
